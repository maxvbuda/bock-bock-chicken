<div id="chicken-chatbot-message-icon" title="Open Chicken Chatbot" style="display:none;position:fixed;bottom:24px;right:24px;width:54px;height:54px;background:#d97428;border-radius:50%;box-shadow:0 4px 16px rgba(0,0,0,0.13);z-index:10000;align-items:center;justify-content:center;cursor:pointer;transition:background 0.2s;">
  <div id="chicken-chatbot-message-icon-content" style="display:flex;align-items:center;justify-content:center;width:100%;height:100%;font-size:2em;user-select:none;">üêî</div>
</div>
  // Minimize and restore logic
  const chatbot = document.getElementById("chicken-chatbot");
  const minimizeBtn = document.getElementById("chicken-chatbot-minimize");
  const icon = document.getElementById("chicken-chatbot-message-icon");
  minimizeBtn.onclick = function() {
    chatbot.style.display = "none";
    icon.style.display = "flex";
  };
  icon.onclick = function() {
    chatbot.style.display = "flex";
    icon.style.display = "none";
  };
  // Start with chatbot visible and icon hidden
  chatbot.style.display = "flex";
  icon.style.display = "none";
<!DOCTYPE html>
<html lang="en">

<head>
  <style>
    .top-menu {
      width: 100%;
      background: #fffbe7;
      border-bottom: 2px solid #e6d1a3;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 0;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .top-menu ul {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      gap: 24px;
    }
    .top-menu li {
      display: inline;
    }
    .top-menu a {
      display: inline-block;
      padding: 12px 28px;
      font-size: 1.1em;
      color: #fff;
      background: #d97428;
      border: none;
      border-radius: 8px;
      font-family: 'Georgia', serif;
      font-weight: bold;
      text-decoration: none;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
      transition: background 0.2s, color 0.2s, box-shadow 0.2s;
      cursor: pointer;
    }
    .top-menu a:hover {
      background: #a85c1a;
      color: #ffe4b3;
      text-decoration: none;
      box-shadow: 0 4px 16px rgba(0,0,0,0.13);
    }
    .top-menu a.active {
      background: #fffbe7;
      color: #d97428;
      border: 2px solid #d97428;
      cursor: default;
      box-shadow: none;
      pointer-events: none;
    }
  </style>
  <meta charset="UTF-8">
  <title>The Cluckington Family</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #c2c2c2;
      color: #333;
    }

    .section {
      width: 100%;
      background: #fffbe7;
      padding: 64px 0 48px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      border-bottom: 2px solid #e6d1a3;
    }
    .section img {
      max-width: 80%;
      max-height: 80vh;
      border-radius: 20px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
      margin-bottom: 32px;
    }

    .family-title {
      font-size: 2.5em;
      color: #d97428;
      margin-bottom: 24px;
      font-family: 'Georgia', serif;
    }

    .story {
      font-size: 1.2em;
      line-height: 1.7;
      background: #fffbe7;
      padding: 22px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
    }

    @media (max-width: 800px) {
      .container {
        flex-direction: column;
      }

      .left,
      .right {
        border-right: none;
        border-bottom: 2px solid #e6d1a3;
        min-height: 300px;
      }
    }
  </style>
</head>

<body>
  <nav class="top-menu">
    <ul>
      <li><a href="index.html" class="active">The Cluckington Family</a></li>
  <li><a href="family-members.html">Family Members</a></li>
      <li><a href="golden-knight.html">The Golden Knight of Chickenopolis</a></li>
    </ul>
  </nav>
  <section class="section" id="cluckington-family">
    <img src="images/medieval_chicken_village.png" alt="Chicken Family Village">
    <div class="family-title" style="margin-top: 32px; font-size: 2em; font-weight: bold; color: #d97428; font-family: 'Georgia', serif; margin-bottom: 12px; text-align: center;">
      The Cluckington Family
    </div>
    <div class="story" style="margin-bottom: 32px; max-width: 700px;">
      Once upon a time in the bustling streets of Chickenopolis, lived the Cluckington family‚Äîa heroic bunch of
      chickens with a knack for adventure. <br><br>
      <div id="family-members">
        Mother Henrietta Cluckington was famous for her delicious and long lasting corn muffins, while Father Roostwell
        Cluckington always woke up the city with his proud crowing at dawn and was known for stopping all of those pesky
        animals that try to eat them. Their three chicks‚ÄîPeep, Cheepers, and Nugget‚Äîwanted to be as heroic as their
        father.
      </div>
      <br><br>
      One spring morning, the Cluckingtons decided to host the annual "Egg-stravaganza," a festival where chickens
      from all corners of Chickenopolis gathered to race, dance, and hunt for the legendary golden egg. Peep, the
      youngest, dreamed of finding the egg and becoming the hero of the day.<br><br>
      With teamwork, laughter, and a sprinkle of luck, the Cluckington family faced muddy puddles, tricky mazes, and
      even a surprise visit from the wise old Professor Featherbeak. In the end, Peep discovered the golden egg hidden
      beneath the oldest oak tree, bringing joy and pride to the family.<br><br>
      From that day on, the Cluckingtons became legends in Chickenopolis, proving that with family, friendship, and a
      little bit of cluck, anything is possible!
    </div>
  </section>

  <!-- Audio Play Button -->
  <div id="audio-fallback-btn-container" style="text-align:center; margin: 32px 0;">
    <button id="audio-fallback-btn" style="font-size:1.2em; padding: 12px 28px; background: #ffe4b3; color: #7a4a13; border: none; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.07); cursor: pointer; font-family: 'Georgia', serif;">Play Theme Audio</button>
    <div style="color:#a00; font-size:0.95em; margin-top:8px;">If you don't hear music, click the button above.</div>
  </div>
  <!-- Hidden YouTube iframe for audio -->
  <div style="position: absolute; left: -9999px; width: 1px; height: 1px; overflow: hidden;">
    <div id="yt-audio"></div>
  </div>
  <script>
    let ytPlayer;
    let ytApiReady = false;
    let audioPlayed = false;
    let fallbackShown = false;
    // Load YouTube IFrame API
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // Save playback time before navigating away
    function saveAudioTime() {
      if (ytPlayer && ytPlayer.getCurrentTime) {
        try {
          localStorage.setItem('bockbock_audio_time', ytPlayer.getCurrentTime());
        } catch (e) {}
      }
    }
    // Attach to all menu links
    document.addEventListener('DOMContentLoaded', function() {
      document.querySelectorAll('.top-menu a').forEach(function(link) {
        if (!link.classList.contains('active')) {
          link.addEventListener('click', saveAudioTime);
        }
      });
    });

    function hideFallbackButton() {
      if (!fallbackShown) {
        document.getElementById('audio-fallback-btn-container').style.display = 'none';
        fallbackShown = true;
      }
    }

    function tryPlayAudio(player) {
      // Always hide the button immediately on any play attempt
      hideFallbackButton();
      try {
        player.unMute();
        player.playVideo();
      } catch (e) {
        // Do nothing, button stays visible
      }
    }

    function createAndPlayYTPlayer() {
      if (audioPlayed || !ytApiReady) return;
      audioPlayed = true;
      hideFallbackButton(); // Hide button immediately
      ytPlayer = new YT.Player('yt-audio', {
        height: '1',
        width: '1',
        videoId: '5j1y_aZORZs',
        events: {
          'onReady': function(event) {
            event.target.mute();
            // Always seek to saved time or 0 if at end
            let t = 0;
            let duration = 0;
            try {
              t = parseFloat(localStorage.getItem('bockbock_audio_time'));
              duration = event.target.getDuration ? event.target.getDuration() : 0;
            } catch (e) {}
            if (!isNaN(t) && t > 0 && (!duration || t < duration - 2)) {
              event.target.seekTo(t, true);
            } else {
              event.target.seekTo(0, true);
            }
            // Always try to play and unmute after seeking
            setTimeout(function() {
              event.target.unMute();
              event.target.playVideo();
              // If not playing, force play again
              setTimeout(function() {
                if (event.target.getPlayerState && event.target.getPlayerState() !== 1) {
                  event.target.playVideo();
                }
              }, 600);
            }, 800);
            hideFallbackButton();
          },
          'onStateChange': function(event) {
            // Loop the video when it ends
            if (event.data === YT.PlayerState.ENDED) {
              event.target.seekTo(0, true);
              event.target.playVideo();
            }
          },
          'onError': function() {
            // Do nothing, button stays visible
          }
        }
      });
      window.removeEventListener('click', createAndPlayYTPlayer);
      window.removeEventListener('keydown', createAndPlayYTPlayer);
      window.removeEventListener('scroll', createAndPlayYTPlayer);
      // Fallback: if player not created after 3 seconds, show button
      setTimeout(function() {
        if (!ytPlayer) showFallbackButton();
      }, 3000);
    }

    window.onYouTubeIframeAPIReady = function() {
  ytApiReady = true;
  // Listen for first user interaction
  window.addEventListener('click', createAndPlayYTPlayer);
  window.addEventListener('keydown', createAndPlayYTPlayer);
  window.addEventListener('scroll', createAndPlayYTPlayer);
    };

    // Fallback button handler
    document.addEventListener('DOMContentLoaded', function() {
      var btn = document.getElementById('audio-fallback-btn');
      if (btn) {
        btn.addEventListener('click', function() {
          hideFallbackButton();
          if (ytPlayer && ytPlayer.playVideo) {
            ytPlayer.unMute();
            ytPlayer.playVideo();
            // If not playing, force play again
            setTimeout(function() {
              if (ytPlayer.getPlayerState && ytPlayer.getPlayerState() !== 1) {
                ytPlayer.playVideo();
              }
            }, 600);
          } else {
            // If player not created, create and play
            createAndPlayYTPlayer();
          }
        });
      }
      // Button is visible by default, nothing to do
    });
  </script>
</body>
</body>

<!-- Chicken Chatbot -->
<style>
  #chicken-chatbot {
    position: fixed;
    bottom: 24px;
    right: 24px;
    width: 320px;
    background: #fffbe7;
    border: 2px solid #d97428;
    border-radius: 16px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.13);
    z-index: 9999;
    font-family: 'Georgia', serif;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transition: box-shadow 0.2s, opacity 0.2s;
  }
  #chicken-chatbot-minimize {
    position: absolute;
    top: 8px;
    right: 8px;
    background: none;
    border: none;
    color: #fffbe7;
    font-size: 1.2em;
    cursor: pointer;
    z-index: 10001;
    padding: 0 6px;
    opacity: 0.7;
    transition: opacity 0.2s;
  }
  #chicken-chatbot-minimize:hover {
    opacity: 1;
  }
  #chicken-chatbot-message-icon {
    display: none;
    position: fixed;
    bottom: 24px;
    right: 24px;
    width: 54px;
    height: 54px;
    background: #d97428;
    border-radius: 50%;
    box-shadow: 0 4px 16px rgba(0,0,0,0.13);
    z-index: 10000;
    <button id="chicken-chatbot-minimize" title="Minimize">&minus;</button>
    justify-content: center;
    cursor: pointer;
    transition: background 0.2s;
  }
  #chicken-chatbot-message-icon:hover {
    background: #a85c1a;
  }
  #chicken-chatbot-message-icon-content {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    font-size: 2em;
    user-select: none;
  }
  #chicken-chatbot-header {
    background: #d97428;
    color: #fffbe7;
    padding: 12px;
    font-weight: bold;
    text-align: center;
    font-size: 1.1em;
  }
  #chicken-chatbot-messages {
    flex: 1;
    padding: 12px;
    overflow-y: auto;
    font-size: 1em;
    min-height: 120px;
    max-height: 220px;
  }
  #chicken-chatbot-input-row {
    display: flex;
    border-top: 1px solid #e6d1a3;
    background: #fffbe7;
  }
  #chicken-chatbot-input {
    flex: 1;
    border: none;
    padding: 10px;
    font-size: 1em;
    border-radius: 0 0 0 12px;
    outline: none;
    background: #fffbe7;
  }
  #chicken-chatbot-send {
    border: none;
    background: #d97428;
    color: #fffbe7;
    padding: 0 18px;
    font-size: 1em;
    border-radius: 0 0 12px 0;
    cursor: pointer;
    font-weight: bold;
    transition: background 0.2s;
  }
  #chicken-chatbot-send:hover {
    background: #a85c1a;
  }
</style>
<div id="chicken-chatbot">
  <button id="chicken-chatbot-minimize" title="Minimize">&minus;</button>
  <div id="chicken-chatbot-header" style="display:flex;align-items:center;justify-content:space-between;">
    <span>Chicken Chatbot</span>
    <div style="display:flex;gap:6px;align-items:center;">
  <button id="chicken-chatbot-newchat" style="padding:4px 10px;font-size:0.95em;background:#ffe4b3;color:#d97428;border:none;border-radius:6px;cursor:pointer;margin-right:20px;">New Chat</button>
    </div>
  </div>
  <div id="chicken-chatbot-messages"></div>
  <div id="chicken-chatbot-input-row">
    <input id="chicken-chatbot-input" type="text" placeholder="Say something...">
    <button id="chicken-chatbot-send">Send</button>
  </div>
</div>
<!-- Removed chicken face minimize icon -->
<script>
  const chickenWords = ["cluck", "squawk", "bawk", "peep"];
  function chickenResponse() {
    // Generate a random sequence of 4-10 chicken words
    const count = Math.floor(Math.random() * 7) + 4;
    let arr = [];
    for (let i = 0; i < count; i++) {
      arr.push(chickenWords[Math.floor(Math.random() * chickenWords.length)]);
    }
    // Capitalize first word, add punctuation
    let str = arr.join(" ");
    str = str.charAt(0).toUpperCase() + str.slice(1) + ["!", ".", "!!", "?", "!!!"][Math.floor(Math.random()*5)];
    return str;
  }
  function addChickenMessage(text, fromUser) {
    const msgDiv = document.createElement("div");
    msgDiv.style.margin = "6px 0";
    msgDiv.style.textAlign = fromUser ? "right" : "left";
    msgDiv.style.color = fromUser ? "#7a4a13" : "#d97428";
    msgDiv.textContent = text;
    document.getElementById("chicken-chatbot-messages").appendChild(msgDiv);
    document.getElementById("chicken-chatbot-messages").scrollTop = 9999;
  }

  // New Chat button logic
  document.getElementById("chicken-chatbot-newchat").onclick = function() {
    document.getElementById("chicken-chatbot-messages").innerHTML = "";
    document.getElementById("chicken-chatbot-input").value = "";
    document.getElementById("chicken-chatbot-input").focus();
  };
  document.getElementById("chicken-chatbot-send").onclick = function() {
    const input = document.getElementById("chicken-chatbot-input");
    const val = input.value.trim();
    if (!val) return;
    addChickenMessage(val, true);
    setTimeout(() => {
      addChickenMessage(chickenResponse(), false);
    }, 500);
    input.value = "";
    input.focus();
  };
  document.getElementById("chicken-chatbot-input").addEventListener("keydown", function(e) {
    if (e.key === "Enter") {
      document.getElementById("chicken-chatbot-send").click();
    }
  });

  // Minimize and restore logic removed; chatbot always open
</script>
</html>