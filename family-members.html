<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cluckington Family Members</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #c2c2c2;
      color: #333;
    }
    .top-menu {
      width: 100%;
      background: #fffbe7;
      border-bottom: 2px solid #e6d1a3;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 0;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .top-menu ul {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      gap: 24px;
    }
    .top-menu li {
      display: inline;
    }
    .top-menu a {
      display: inline-block;
      padding: 12px 28px;
      font-size: 1.1em;
      color: #fff;
      background: #d97428;
      border: none;
      border-radius: 8px;
      font-family: 'Georgia', serif;
      font-weight: bold;
      text-decoration: none;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
      transition: background 0.2s, color 0.2s, box-shadow 0.2s;
      cursor: pointer;
    }
    .top-menu a:hover {
      background: #a85c1a;
      color: #ffe4b3;
      text-decoration: none;
      box-shadow: 0 4px 16px rgba(0,0,0,0.13);
    }
    .top-menu a.active {
      background: #fffbe7;
      color: #d97428;
      border: 2px solid #d97428;
      cursor: default;
      box-shadow: none;
      pointer-events: none;
    }
    .section {
      width: 100%;
      background: #fffbe7;
      padding: 64px 0 48px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      border-bottom: 2px solid #e6d1a3;
    }
    .family-title {
      font-size: 2.5em;
      color: #d97428;
      margin-bottom: 24px;
      font-family: 'Georgia', serif;
      font-weight: bold;
      margin-top: 32px;
      text-align: center;
    }
    .story {
      font-size: 1.2em;
      line-height: 1.7;
      background: #fffbe7;
      padding: 22px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
      max-width: 700px;
    }
  </style>
</head>
<body>
  <nav class="top-menu">
    <ul>
      <li><a href="index.html">The Cluckington Family</a></li>
      <li><a href="family-members.html" class="active">Family Members</a></li>
      <li><a href="golden-knight.html">The Golden Knight of Chickenopolis</a></li>
      <li><a href="homework.html">Homework Kanban</a></li>
    </ul>
  </nav>
  <section class="section" id="family-members">
  <img src="images/family_picture.png" alt="Cluckington Family Picture" style="max-width:80%; max-height:80vh; border-radius:20px; box-shadow:0 4px 16px rgba(0,0,0,0.1); margin-bottom:32px;">
    <div class="family-title">Cluckington Family Members</div>
    <div class="story">
  strong>Mother Henrietta Cluckington</strong><br>
      Famous for her delicious and long-lasting corn muffins, Henrietta is the heart of the family. She’s always ready with a warm hug, a wise saying, or a fresh-baked treat. Her muffins are so legendary that even the mayor of Chickenopolis requests them for special occasions!<br><br>

      <strong>Father Roostwell Cluckington</strong><br>
      The proud protector of the family, Roostwell wakes up the city every morning with his mighty crow. He’s known for his bravery in keeping the family safe from sneaky foxes and for teaching his chicks the importance of courage and kindness.<br><br>

      <strong>Peep</strong><br>
      The youngest chick, Peep is full of curiosity and dreams of adventure. Always the first to volunteer for a new quest, Peep’s big heart and quick thinking have saved the day more than once. Peep is also a master at hide-and-seek!<br><br>

      <strong>Cheepers</strong><br>
      Cheepers is the musical one, always singing or whistling a tune. With a knack for making up silly songs and leading the family in dance parties, Cheepers brings laughter and joy to every day. Cheepers hopes to one day perform on the grand stage at the Chickenopolis Festival.<br><br>

      <strong>Nugget</strong><br>
      The boldest of the chicks, Nugget is always ready for action. Whether it’s climbing the tallest haystack or racing through the fields, Nugget’s energy is endless. Nugget dreams of becoming a famous explorer and mapping every corner of Chickenopolis.<br><br>

      Together, the Cluckingtons are a team—supporting each other through every challenge and celebrating every victory, big or small. Their coop is always filled with laughter, music, and the smell of fresh muffins!
    </div>
    <div style="text-align:center; margin: 18px 0;">
      <button id="autoread-toggle-btn" style="font-size:1.1em; padding: 10px 22px; background: #ffe4b3; color: #7a4a13; border: 1px solid #e6d1a3; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.07); cursor: pointer; font-family: 'Georgia', serif;">🔊 Read Story</button>
    </div>
  </section>

  <!-- Audio Play Button -->
  <div id="audio-fallback-btn-container" style="text-align:center; margin: 32px 0;">
    <button id="audio-fallback-btn" style="font-size:1.2em; padding: 12px 28px; background: #ffe4b3; color: #7a4a13; border: none; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.07); cursor: pointer; font-family: 'Georgia', serif;">Play Theme Audio</button>
    <div style="color:#a00; font-size:0.95em; margin-top:8px;">If you don't hear music, click the button above.</div>
  </div>
  <!-- Hidden YouTube iframe for audio -->
  <div style="position: absolute; left: -9999px; width: 1px; height: 1px; overflow: hidden;">
    <div id="yt-audio"></div>
  </div>
  <script>
    let ytPlayer;
    let ytApiReady = false;
    let audioPlayed = false;
    let fallbackShown = false;
    // Load YouTube IFrame API
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // Save playback time before navigating away
    function saveAudioTime() {
      if (ytPlayer && ytPlayer.getCurrentTime) {
        try {
          localStorage.setItem('bockbock_audio_time', ytPlayer.getCurrentTime());
        } catch (e) {}
      }
    }
    // Attach to all menu links
    document.addEventListener('DOMContentLoaded', function() {
      document.querySelectorAll('.top-menu a').forEach(function(link) {
        if (!link.classList.contains('active')) {
          link.addEventListener('click', saveAudioTime);
        }
      });
    });

    function hideFallbackButton() {
      if (!fallbackShown) {
        document.getElementById('audio-fallback-btn-container').style.display = 'none';
        fallbackShown = true;
      }
    }

    function tryPlayAudio(player) {
      try {
        player.unMute();
        player.playVideo();
        // If not playing after 2 seconds, keep button visible
        setTimeout(function() {
          if (player.getPlayerState && player.getPlayerState() === 1) {
            hideFallbackButton();
          }
        }, 2000);
      } catch (e) {
        // Do nothing, button stays visible
      }
    }

    function createAndPlayYTPlayer() {
      if (audioPlayed || !ytApiReady) return;
      audioPlayed = true;
      ytPlayer = new YT.Player('yt-audio', {
        height: '1',
        width: '1',
        videoId: '5j1y_aZORZs',
        events: {
          'onReady': function(event) {
            event.target.mute();
            // Always seek to saved time or 0 if at end
            let t = 0;
            let duration = 0;
            try {
              t = parseFloat(localStorage.getItem('bockbock_audio_time'));
              duration = event.target.getDuration ? event.target.getDuration() : 0;
            } catch (e) {}
            if (!isNaN(t) && t > 0 && (!duration || t < duration - 2)) {
              event.target.seekTo(t, true);
            } else {
              event.target.seekTo(0, true);
            }
            // Always try to play and unmute after seeking
            setTimeout(function() {
              event.target.unMute();
              event.target.playVideo();
              // If not playing, force play again
              setTimeout(function() {
                if (event.target.getPlayerState && event.target.getPlayerState() !== 1) {
                  event.target.playVideo();
                }
              }, 600);
            }, 800);
            hideFallbackButton();
          },
          'onStateChange': function(event) {
            // Loop the video when it ends
            if (event.data === YT.PlayerState.ENDED) {
              event.target.seekTo(0, true);
              event.target.playVideo();
            }
          },
          'onError': function() {
            // Do nothing, button stays visible
          }
        }
      });
      window.removeEventListener('click', createAndPlayYTPlayer);
      window.removeEventListener('keydown', createAndPlayYTPlayer);
      window.removeEventListener('scroll', createAndPlayYTPlayer);
      // Fallback: if player not created after 3 seconds, show button
      setTimeout(function() {
        if (!ytPlayer) showFallbackButton();
      }, 3000);
    }

    window.onYouTubeIframeAPIReady = function() {
  ytApiReady = true;
  // Listen for first user interaction
  window.addEventListener('click', createAndPlayYTPlayer);
  window.addEventListener('keydown', createAndPlayYTPlayer);
  window.addEventListener('scroll', createAndPlayYTPlayer);
    };

    // Fallback button handler
    document.addEventListener('DOMContentLoaded', function() {
      var btn = document.getElementById('audio-fallback-btn');
      if (btn) {
        btn.addEventListener('click', function() {
          if (ytPlayer && ytPlayer.playVideo) {
            ytPlayer.unMute();
            ytPlayer.playVideo();
          } else {
            // If player not created, create and play
            createAndPlayYTPlayer();
          }
        });
      }
  // Button is visible by default, nothing to do
    });
  </script>
</script>

<!-- Chicken Chatbot UI and Logic -->
<script>
    // --- Autoread Story with Start/Stop Button ---
    (function() {
      let utter = null;
      let isReading = false;
      function speakStory() {
        if (!('speechSynthesis' in window)) return;
        if (isReading) return;
        const storyEl = document.querySelector('.story');
        if (!storyEl) return;
        const text = storyEl.innerText || storyEl.textContent;
        if (!text) return;
        utter = new window.SpeechSynthesisUtterance(text);
        utter.rate = 1.08;
        utter.pitch = 1.1;
        utter.volume = 1;
        isReading = true;
        updateBtn();
        window.speechSynthesis.speak(utter);
        utter.onend = function() { isReading = false; updateBtn(); };
        utter.onerror = function() { isReading = false; updateBtn(); };
      }
      function stopStory() {
        if (!('speechSynthesis' in window)) return;
        window.speechSynthesis.cancel();
        isReading = false;
        updateBtn();
      }
      function updateBtn() {
        const btn = document.getElementById('autoread-toggle-btn');
        if (!btn) return;
        btn.textContent = isReading ? '⏹️ Stop Reading' : '🔊 Read Story';
      }
      window.addEventListener('DOMContentLoaded', function() {
        const btn = document.getElementById('autoread-toggle-btn');
        if (btn) {
          btn.onclick = function() {
            if (isReading) {
              stopStory();
            } else {
              speakStory();
            }
          };
        }
      });
    })();
(function() {
  const style = document.createElement('style');
  style.textContent = `
    .chicken-chatbot {
      position: fixed;
      bottom: 32px;
      right: 32px;
      width: 340px;
      max-width: 92vw;
      background: #fffbe7;
      border: 2px solid #e6d1a3;
      border-radius: 18px;
      box-shadow: 0 6px 32px rgba(0,0,0,0.18);
      z-index: 2147483647;
      display: flex;
      flex-direction: column;
      font-family: 'Segoe UI', Arial, sans-serif;
      transition: box-shadow 0.2s;
    }
    .chicken-chatbot.minimized {
      width: 72px !important;
      height: 72px !important;
      min-width: 0 !important;
      min-height: 0 !important;
      overflow: visible !important;
      background: #fffbe7 !important;
      border: 4px solid #d97428 !important;
      box-shadow: none !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      padding: 0 !important;
      border-radius: 50% !important;
      cursor: pointer !important;
      z-index: 99999 !important;
    }
    .chicken-chatbot-header {
      display: flex;
      align-items: center;
      background: #ffe4b3;
      border-bottom: 1px solid #e6d1a3;
      border-radius: 16px 16px 0 0;
      padding: 8px 12px 8px 10px;
      gap: 10px;
    }
    .chicken-face {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: #fffbe7;
      border: 2px solid #d97428;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.7em;
      margin-right: 2px;
    }
    .chicken-chatbot-title {
      font-weight: bold;
      color: #d97428;
      font-size: 1.1em;
      flex: 1;
    }
    .chicken-chatbot-btn {
      background: none;
      border: none;
      color: #d97428;
      font-size: 1.3em;
      cursor: pointer;
      margin-left: 4px;
      transition: color 0.2s;
    }
    .chicken-chatbot-btn:hover {
      color: #a85c1a;
    }
    .chicken-chatbot-body {
      padding: 16px 14px 12px 14px;
      flex: 1;
      overflow-y: auto;
      background: #fffbe7;
      min-height: 120px;
      max-height: 260px;
    }
    .chicken-chatbot-messages {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .chicken-chatbot-message {
      background: #ffe4b3;
      border-radius: 10px;
      padding: 8px 12px;
      max-width: 80%;
      font-size: 1em;
      word-break: break-word;
    }
    .chicken-chatbot-message.user {
      align-self: flex-end;
      background: #d97428;
      color: #fffbe7;
    }
    .chicken-chatbot-message.bot {
      align-self: flex-start;
      background: #fffbe7;
      color: #a85c1a;
      border: 1px solid #e6d1a3;
    }
    .chicken-chatbot-footer {
      display: flex;
      align-items: center;
      padding: 10px 12px 12px 12px;
      border-radius: 0 0 16px 16px;
      background: #fffbe7;
      border-top: 1px solid #e6d1a3;
    }
    .chicken-chatbot-input {
      flex: 1;
      padding: 7px 12px;
      border-radius: 8px;
      border: 1px solid #e6d1a3;
      font-size: 1em;
      outline: none;
    }
    .chicken-chatbot-send-btn {
      background: #d97428;
      color: #fffbe7;
      border: none;
      border-radius: 8px;
      font-size: 1.1em;
      padding: 7px 16px;
      margin-left: 8px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .chicken-chatbot-send-btn:hover {
      background: #a85c1a;
    }
    .chicken-chatbot.minimized {
      width: 72px !important;
      height: 72px !important;
      min-width: 0 !important;
      min-height: 0 !important;
      overflow: visible !important;
      background: #fffbe7 !important;
      border: 4px solid #d97428 !important;
      box-shadow: none !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      padding: 0 !important;
      border-radius: 50% !important;
      cursor: pointer !important;
      z-index: 99999 !important;
    }
    .chicken-chatbot.minimized .chicken-chatbot-header {
      border-radius: 50%;
      background: transparent;
      border: none;
      padding: 0;
      justify-content: center;
      width: 72px;
      height: 72px;
      align-items: center;
      display: flex;
      visibility: visible !important;
      pointer-events: auto !important;
    }
    .chicken-chatbot.minimized .chicken-face {
      margin: 0;
      width: 54px;
      height: 54px;
      font-size: 2.7em;
      border: none;
      background: transparent;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: none;
    }
    .chicken-chatbot.minimized .chicken-chatbot-title,
    .chicken-chatbot.minimized .chicken-chatbot-btn:not(#chicken-chatbot-min),
    .chicken-chatbot.minimized .chicken-chatbot-body,
    .chicken-chatbot.minimized .chicken-chatbot-footer {
      visibility: hidden !important;
      pointer-events: none !important;
      height: 0 !important;
      width: 0 !important;
      min-width: 0 !important;
      min-height: 0 !important;
      max-width: 0 !important;
      max-height: 0 !important;
      overflow: hidden !important;
      display: block !important;
      position: absolute !important;
      left: -9999px !important;
      top: -9999px !important;
    }
    .chicken-chatbot.minimized .chicken-chatbot-btn#chicken-chatbot-min {
      display: none !important;
    }
  `;
  document.head.appendChild(style);

  // Create chatbot container
  const chatbot = document.createElement('div');
  chatbot.className = 'chicken-chatbot minimized';
  chatbot.innerHTML = `
    <div class="chicken-chatbot-header">
      <div class="chicken-face" title="Chicken Chatbot">🐔</div>
      <div class="chicken-chatbot-title">Chicken Chatbot</div>
      <button class="chicken-chatbot-btn" title="Speak Mode" id="chicken-chatbot-speak-toggle" aria-pressed="false">🔊</button>
      <button class="chicken-chatbot-btn" title="New Chat" id="chicken-chatbot-new">🔄</button>
      <button class="chicken-chatbot-btn" title="Minimize" id="chicken-chatbot-min">🗕</button>
    </div>
    <div class="chicken-chatbot-body">
      <div class="chicken-chatbot-messages" id="chicken-chatbot-messages"></div>
    </div>
    <div class="chicken-chatbot-footer">
      <input class="chicken-chatbot-input" id="chicken-chatbot-input" type="text" placeholder="Type your message..." autocomplete="off" />
      <button class="chicken-chatbot-send-btn" id="chicken-chatbot-send">Send</button>
    </div>
  `;
  document.body.appendChild(chatbot);

  // Minimize/restore logic
  const minBtn = chatbot.querySelector('#chicken-chatbot-min');
  const newBtn = chatbot.querySelector('#chicken-chatbot-new');
  const face = chatbot.querySelector('.chicken-face');
  const speakToggle = chatbot.querySelector('#chicken-chatbot-speak-toggle');
  let speakMode = false;
  function speakBotMsg(text) {
    if (!('speechSynthesis' in window)) return;
    const utter = new window.SpeechSynthesisUtterance(text);
    const voices = window.speechSynthesis.getVoices();
    if (voices && voices.length) {
      // Prefer animal/cartoon/bird voices, else default
      let chickenVoice = voices.find(v => /chicken|bird|duck|cartoon|fun|animal|silly|squeaky|helium/i.test(v.name));
      utter.voice = chickenVoice || voices[0];
    }
    // Make the voice sound more like a chicken: high pitch, fast, short
    utter.rate = 1.5 + Math.random() * 0.4; // 1.5 - 1.9
    utter.pitch = 2.0 + Math.random() * 0.7; // 2.0 - 2.7
    utter.volume = 1;
    // Optionally, break up long phrases into short bursts for more "chickeny" effect
    if (text.length > 18) {
      let parts = text.split(/[!?.]/).filter(Boolean);
      let delay = 0;
      for (let part of parts) {
        const u = new window.SpeechSynthesisUtterance(part.trim());
        u.voice = utter.voice;
        u.rate = utter.rate;
        u.pitch = utter.pitch;
        u.volume = utter.volume;
        setTimeout(() => window.speechSynthesis.speak(u), delay);
        delay += 350 + Math.random() * 200;
      }
    } else {
      window.speechSynthesis.speak(utter);
    }
  }
  if (speakToggle) {
    speakToggle.onclick = function() {
      speakMode = !speakMode;
      speakToggle.setAttribute('aria-pressed', speakMode ? 'true' : 'false');
      speakToggle.style.color = speakMode ? '#a85c1a' : '#d97428';
    };
  }
  minBtn.onclick = () => chatbot.classList.add('minimized');
  face.onclick = () => chatbot.classList.remove('minimized');

  // New Chat logic
  newBtn.onclick = () => {
    const msgBox = chatbot.querySelector('#chicken-chatbot-messages');
    msgBox.innerHTML = '';
    const greeting = randomGreeting();
    addBotMsg(greeting);
    if (speakMode) speakBotMsg(greeting);
  };

  // Message logic
  const input = chatbot.querySelector('#chicken-chatbot-input');
  const sendBtn = chatbot.querySelector('#chicken-chatbot-send');
  const msgBox = chatbot.querySelector('#chicken-chatbot-messages');

  function addMsg(text, who) {
    const msg = document.createElement('div');
    msg.className = 'chicken-chatbot-message ' + who;
    msg.textContent = text;
    msgBox.appendChild(msg);
    msgBox.scrollTop = msgBox.scrollHeight;
  }
  function addBotMsg(text) { addMsg(text, 'bot'); }
  function addUserMsg(text) { addMsg(text, 'user'); }

  function randomGreeting() {
    const greetings = [
      'Bawk bawk bawk! Cluck cluck cluck! Peep peep peep! Squawk squawk!',
      'Cluck cluck cluck! Bawk-a-ROO! Peepity peep bawk bawk!',
      'Squawkity squawk! Peep peep peep! Bawk bawk!',
      'Peep peep peep! Bawk bawk! Cluck cluck! Bawk bawk!',
      'Bawk bawk! Cluck cluck! Peep! Squawk squawk!',
      'Bawk-a-ROO! Cluck cluck! Peep peep! Squawk squawk!',
      'Peepity peep bawk bawk! Cluck cluck! Squawk squawk!',
      'Squawk squawk! Cluck cluck! Bawk bawk bawk!',
      'Bawk bawk! Peep peep! Cluck cluck! Squawkity squawk!',
      'Cluck-a-doodle cluck! Bawk bawk bawk! Peep peep!'
    ];
    return greetings[Math.floor(Math.random() * greetings.length)];
  }
  function randomChickenReply() {
    const sounds = [
      'Bawk bawk bawk! Cluck-a-doodle-doo! Peep peep, squawk squawk! Bawk bawk bawk bawk!',
      'Cluck cluck cluck cluck bawk bawk bawk! Peep peep! Squawk squawk squawk!',
      'Squawkity squawk! Peep peep bawk bawk! Cluck cluck cluck cluck!',
      'Bawk bawk! Cluck cluck! Peep peep! Bawk bawk bawk!',
      'Cluck-a-doodle-doo! Bawk bawk bawk! Peep peep! Squawk squawk!',
      'Peep peep! Bawk bawk bawk bawk! Cluck cluck! Squawk squawk!',
      'Squawk! Cluck cluck cluck! Bawk bawk! Peep peep peep!',
      'Bawk bawk! Peep peep! Cluck cluck! Squawk squawk squawk!',
      'Cluck cluck! Bawk bawk bawk bawk! Peep peep! Squawkity squawk!',
      'Squawkity squawk! Peep peep! Bawk bawk! Cluck cluck cluck!',
      'Bawk-a-ROO! Cluck cluck squawk! Peep peep! Bawk bawk bawk!',
      'Peep peep peep! Bawk bawk bawk! Cluck cluck! Squawk squawk!',
      'Cluck cluck! Squawk squawk! Peep! Bawk bawk! Cluck cluck!',
      'Bawk bawk bawkity bawk! Cluck cluck! Peep peep! Squawk squawk!',
      'Squawk-a-doodle! Peep peep cluck cluck! Bawk bawk! Cluck cluck!',
      'Cluck cluck cluck! Bawk bawk-a-doodle! Peep peep! Squawk squawk!',
      'Peepity peep! Squawk squawk! Bawk bawk! Cluck cluck cluck!',
      'Bawk bawk! Cluck cluck! Peep peep! Squawk! Bawk bawk bawk!',
      'Squawkity squawk! Bawk bawk bawk! Cluck cluck! Peep peep!',
      'Cluck-a-doodle cluck! Peep peep! Bawk bawk! Squawk squawk!'
    ];
    return sounds[Math.floor(Math.random() * sounds.length)];
  }

  // Initial greeting
  const initialGreeting = randomGreeting();
  addBotMsg(initialGreeting);
  if (speakMode) speakBotMsg(initialGreeting);

  function sendUserMsg() {
    const val = input.value.trim();
    if (!val) return;
    addUserMsg(val);
    input.value = '';
    setTimeout(() => {
      const reply = randomChickenReply();
      addBotMsg(reply);
      if (speakMode) speakBotMsg(reply);
    }, 600 + Math.random() * 400);
  }
  sendBtn.onclick = sendUserMsg;
  input.addEventListener('keydown', function(e) {
    if (e.key === 'Enter') sendUserMsg();
  });
})();
</script>
</body>
</html>
