<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>The Golden Knight of Chickenopolis</title>
  <link rel="stylesheet" href="style.css">
    
</head>
<body>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #c2c2c2;
      color: #333;
    }
    .top-menu {
      width: 100%;
      background: #fffbe7;
      border-bottom: 2px solid #e6d1a3;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 0;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    .top-menu ul {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      gap: 24px;
    }
    .top-menu li {
      display: inline;
    }
    .top-menu a {
      display: inline-block;
      padding: 12px 28px;
      font-size: 1.1em;
      color: #fff;
      background: #d97428;
      border: none;
      border-radius: 8px;
      font-family: 'Georgia', serif;
      font-weight: bold;
      text-decoration: none;
      box-shadow: 0 2px 8px rgba(0,0,0,0.07);
      transition: background 0.2s, color 0.2s, box-shadow 0.2s;
      cursor: pointer;
    }
    .top-menu a:hover {
      background: #a85c1a;
      color: #ffe4b3;
      text-decoration: none;
      box-shadow: 0 4px 16px rgba(0,0,0,0.13);
    }
    .top-menu a.active {
      background: #fffbe7;
      color: #d97428;
      border: 2px solid #d97428;
      cursor: default;
      box-shadow: none;
      pointer-events: none;
    }
    .section {
      width: 100%;
      background: #fffbe7;
      padding: 64px 0 48px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      border-bottom: 2px solid #e6d1a3;
    }
    .section img {
      max-width: 80%;
      max-height: 80vh;
      border-radius: 20px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
      margin-bottom: 32px;
    }
    .family-title {
      font-size: 2.5em;
      color: #d97428;
      margin-bottom: 24px;
      font-family: 'Georgia', serif;
      font-weight: bold;
      margin-top: 32px;
      text-align: center;
    }
    .story {
      font-size: 1.2em;
      line-height: 1.7;
      background: #fffbe7;
      padding: 22px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
      max-width: 700px;
    }
  </style>
  <nav class="top-menu">
    <ul>
      <li><a href="index.html">The Cluckington Family</a></li>
      <li><a href="family-members.html">Family Members</a></li>
      <li><a href="golden-knight.html" class="active">The Golden Knight of Chickenopolis</a></li>
    </ul>
  </nav>
  <section class="section" id="golden-knight">
    <img src="images/Hero_Peep.png" alt="Sir Peepius Aurelius">
    <div class="family-title">The Golden Knight of Chickenopolis</div>
    <div class="story">
      Long before his name was etched in golden letters on the walls of Chickenopolis, Sir Peepius Aurelius was
      simply Peep — the littlest chick of the Cluckington brood. While his father Roostwell defended the coop and
      his mother Henrietta baked muffins that could outlast a winter, Peep dreamed not of chores or festivals but of
      glory.<br><br>
      That glory arrived one spring morning, when the Cluckingtons hosted the legendary Egg-stravaganza Festival.
      Between muddy puddles, feather-fluffing races, and a wise riddle from Professor Featherbeak, young Peep
      stumbled upon the Golden Egg, hidden beneath the oldest oak tree in all of Chickenopolis. Lifting it high, he
      was crowned the hero of the day, his name cheered across the city.<br><br>
      But Peep hungered for more than a single triumph. He trained in the ways of discipline, inspired by the
      scrolls of the old Rooster Republic. He donned armor forged in the Roman style, carried the gladius of his
      forefathers, and bore a shield etched with the Golden Egg and laurel wreath — the eternal symbol of
      Cluckington victory.<br><br>
      When fox marauders swept into Chickenopolis years later, it was Sir Peepius Aurelius who led the defense.
      Standing at the city gates, he raised his shield high and cried:<br>
      <em>“As I once found the egg, I shall now guard the nest!”</em><br><br>
      With a cheer from the townsfolk, he drove the invaders back, proving himself not just the hero of a festival,
      but the champion of a city.<br><br>
      To this day, children of Chickenopolis race beneath the old oak tree, chanting his name, and knights of the
      city touch their shields to the Golden Egg before battle, whispering his vow:<br>
      <em>“In every egg lies a legacy — and in every Cluckington, a hero.”</em>
    </div>
  </section>


  <!-- Audio Play Button -->
  <div id="audio-fallback-btn-container" style="text-align:center; margin: 32px 0;">
    <button id="audio-fallback-btn" style="font-size:1.2em; padding: 12px 28px; background: #ffe4b3; color: #7a4a13; border: none; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.07); cursor: pointer; font-family: 'Georgia', serif;">Play Theme Audio</button>
    <div style="color:#a00; font-size:0.95em; margin-top:8px;">If you don't hear music, click the button above.</div>
  </div>
  <!-- Hidden YouTube iframe for audio -->
  <div style="position: absolute; left: -9999px; width: 1px; height: 1px; overflow: hidden;">
    <div id="yt-audio"></div>
  </div>
  <script>
    let ytPlayer;
    let ytApiReady = false;
    let audioPlayed = false;
    let fallbackShown = false;
    // Load YouTube IFrame API
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // Save playback time before navigating away
    function saveAudioTime() {
      if (ytPlayer && ytPlayer.getCurrentTime) {
        try {
          localStorage.setItem('bockbock_audio_time', ytPlayer.getCurrentTime());
        } catch (e) {}
      }
    }
    // Attach to all menu links
    document.addEventListener('DOMContentLoaded', function() {
      document.querySelectorAll('.top-menu a').forEach(function(link) {
        if (!link.classList.contains('active')) {
          link.addEventListener('click', saveAudioTime);
        }
      });
    });

    function hideFallbackButton() {
      if (!fallbackShown) {
        document.getElementById('audio-fallback-btn-container').style.display = 'none';
        fallbackShown = true;
      }
    }

    function tryPlayAudio(player) {
      // Always hide the button immediately on any play attempt
      hideFallbackButton();
      try {
        player.unMute();
        player.playVideo();
      } catch (e) {
        // Do nothing, button stays visible
      }
    }

    function createAndPlayYTPlayer() {
      if (audioPlayed || !ytApiReady) return;
      audioPlayed = true;
      hideFallbackButton(); // Hide button immediately
      ytPlayer = new YT.Player('yt-audio', {
        height: '1',
        width: '1',
        videoId: '5j1y_aZORZs',
        events: {
          'onReady': function(event) {
            event.target.mute();
            // Always seek to saved time or 0 if at end
            let t = 0;
            let duration = 0;
            try {
              t = parseFloat(localStorage.getItem('bockbock_audio_time'));
              duration = event.target.getDuration ? event.target.getDuration() : 0;
            } catch (e) {}
            if (!isNaN(t) && t > 0 && (!duration || t < duration - 2)) {
              event.target.seekTo(t, true);
            } else {
              event.target.seekTo(0, true);
            }
            // Always try to play and unmute after seeking
            setTimeout(function() {
              event.target.unMute();
              event.target.playVideo();
              // If not playing, force play again
              setTimeout(function() {
                if (event.target.getPlayerState && event.target.getPlayerState() !== 1) {
                  event.target.playVideo();
                }
              }, 600);
            }, 800);
            hideFallbackButton();
          },
          'onError': function() {
            // Do nothing, button stays visible
          }
        }
      });
      window.removeEventListener('click', createAndPlayYTPlayer);
      window.removeEventListener('keydown', createAndPlayYTPlayer);
      window.removeEventListener('scroll', createAndPlayYTPlayer);
      // Fallback: if player not created after 3 seconds, show button
      setTimeout(function() {
        if (!ytPlayer) showFallbackButton();
      }, 3000);
    }


    window.onYouTubeIframeAPIReady = function() {
      ytApiReady = true;
      // Listen for first user interaction
      function playOnFirstInteraction() {
        createAndPlayYTPlayer();
        window.removeEventListener('click', playOnFirstInteraction);
        window.removeEventListener('keydown', playOnFirstInteraction);
        window.removeEventListener('scroll', playOnFirstInteraction);
      }
      window.addEventListener('click', playOnFirstInteraction);
      window.addEventListener('keydown', playOnFirstInteraction);
      window.addEventListener('scroll', playOnFirstInteraction);
    };

    // Fallback button handler
    document.addEventListener('DOMContentLoaded', function() {
      var btn = document.getElementById('audio-fallback-btn');
      if (btn) {
        btn.addEventListener('click', function() {
          hideFallbackButton();
          if (ytPlayer && ytPlayer.playVideo) {
            ytPlayer.unMute();
            ytPlayer.playVideo();
            // If not playing, force play again
            setTimeout(function() {
              if (ytPlayer.getPlayerState && ytPlayer.getPlayerState() !== 1) {
                ytPlayer.playVideo();
              }
            }, 600);
          } else {
            // If player not created, create and play
            createAndPlayYTPlayer();
          }
        });
      }
      // Button is visible by default, nothing to do
    });
  </script>
</body>
</html>
</body>
</html>
